{% extends 'base.html' %} 
{% load static %} 
{% block title %} 
Esewa 
{%endblock %} 

{% block content %}

<div class="container-fluid ">
  <div class="d-flex justify-content-center align-items-center full-height"> 
    <div class="col-md-5 p-3 shadow-lg">
      <h2 class="text-center text-muted">
        You are being redirected to eSewa. Please wait.....
      </h2>

      <div class="card d-none">
        <form
          action="https://rc-epay.esewa.com.np/api/epay/main/v2/form"
          method="POST"
          id="esewa_form"
        >
          <input type="text" name="amount" value="{{data.amount}}" />
          <input type="text" name="tax_amount" value="0" />
          <input type="text" name="total_amount" value="{{data.total_amount}}" />
          <input type="text" name="transaction_uuid" value="{{data.transaction_uuid}}" />
          <input type="text" name="product_code" value="EPAYTEST" />
          <input type="text" name="product_service_charge" value="0" />
          <input type="text" name="product_delivery_charge" value="0" />
          <input type="text" name="success_url" value="{{ data.success_url }}" />
          <input type="text" name="failure_url" value="{{ data.failure_url }}" />
          <input
            type="text"
            name="signed_field_names"
            value="total_amount,transaction_uuid,product_code"
          />
          <input type="text" name="signature" value="{{data.signature}}" />

          <input type="submit" />
        </form>
      </div>
    </div>

  </div>
</div>

<script>
    setTimeout(()=>{
        document.getElementById('esewa_form').submit()
    },2000
    )
</script>

{% endblock %}
